{{define "style"}}
<link rel="stylesheet" href="/assets/css/new_post.css">
{{end}}

{{define "title"}}talk - New Post{{end}}



{{define "body"}}
<main>
    {{block "sidebar" .}}{{end}}
    <section class="create-post">
        <h2>Create a New Post</h2>
        <form id="createPostForm" action="/new_post" method="post">
            <input name="title" type="text" placeholder="Post Title" class="post-title" minlength="3" maxlength="60" required>
            <textarea name="content" placeholder="Post Content" class="post-content" required minlength="10" maxlength="10000"></textarea>
            <div class="form-group">
                <label>Choose Categories:</label>
                <div class="categories">
                    {{range .}}
                    <label><input type="checkbox" name="category" value="{{.Id}}"> {{.Name}}</label>
                    {{end}}
                </div>
            </div>
            <button id="submition-button" type="submit">Create Post</button>
            <p id="responseMessage"></p>
        </form>
        <script type="module">
            import { isValidPost } from "/assets/js/posts.js";
            const textarea = document.querySelector('.post-content')
            textarea.addEventListener('input', (event) => {
                textarea.style.height = 'auto'
                textarea.style.height = textarea.scrollHeight + "px"
            });
            const botton = document.querySelector('#submition-button');
            botton.disable = 'true'
            document.getElementById('createPostForm').addEventListener('submit', (e) => isValidPost(e))
        </script>
    </section>
</main>
{{end}}

{{define "script"}}

{{end}}